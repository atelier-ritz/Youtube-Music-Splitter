# yt-dlp configuration file
# This file configures yt-dlp to work better with modern YouTube restrictions

# Use Node.js as JavaScript runtime
--js-runtimes node

# Better user agent to avoid 403 errors
--user-agent "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"

# Use IPv4 to avoid connection issues
--force-ipv4

# Better format selection to avoid SABR streaming issues
--format "bestaudio[ext=m4a]/bestaudio[ext=webm]/bestaudio"

# Add timeout to prevent hanging
--socket-timeout 30

# Retry on failures
--retries 3

# Skip unavailable fragments
--skip-unavailable-fragments

# Ignore errors for non-critical issues
--ignore-errors

# Add realistic headers
--add-header "Accept-Language:en-US,en;q=0.9"
--add-header "Accept-Encoding:gzip, deflate, br"
--add-header "Accept:text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8"
--add-header "Connection:keep-alive"
--add-header "Upgrade-Insecure-Requests:1"